from PIL import Image,ImageDraw,ImageFont
import json


Coords = {"China": [3085,725,72], 
          "Denmark": [1882,372,16],
          "Japan": [3684,680,48],
          "Ecuador": [565,1253,36], 
          "Benin": [1862,1173,16],
          "Belgium": [1865,428,11], 
          "Belarus": [2153,421,18], 
          "Austria": [2009,506,10], 
          "Bahrain":[2503,829,9], 
          "Chile": [711,1575,56], 
          "Andorra": [1889,600,9], 
          "Holy See (Vatican City State)": [1980,624,9], 
          "Albania": [2059,641,10], 
          "Algeria": [1809,798,36], 
          "Angola": [2037,1438,20], 
          "Antigua and Barbuda": [1043,982,20], 
          "Argentina": [934,1729,28], 
          "Azerbaijan": [2422,617,8], 
          "Bahamas": [852,852,24], 
          "Barbados":[1030,1073,24], 
          """ 
          "Belize": 21, 
          "Bhutan": 22, 
          "Bolivia": 23, 
          "Bosnia and Herzegovina": 24, 
          "Botswana": 25, 
          "Bulgaria": 26, 
          "Burkina Faso": 27, 
          "Burundi": 28, 
          "Cambodia": 29, 
          "Cape Verde": 30, 
          "Central African Republic": 31, 
          "Chad": [2075,993,20], 
          "Comoros": 33, 
          "Congo (Brazzaville)": 34, 
          "Congo (Kinshasa)": 35, 
          "Costa Rica": 36, 
          "C\u00f4te d'Ivoire": 37, 
          "Croatia": 38, 
          "Cuba": 39, 
          "Cyprus": 40, 
          "Czech Republic": 41, 
          "Dominica": 42, 
          "Dominican Republic": 43, 
          "El Salvador": 44, 
          "Equatorial Guinea": 45, 
          "Eritrea": 46, 
          "Estonia": 47, 
          "Fiji": 48, 
          "Finland": 49, 
          "Gabon": 50, 
          "Gambia": 51, 
          "Georgia": 52, 
          "Grenada": 53, 
          "Guatemala": 54, 
          "Guinea": 55, 
          "Guinea-Bissau": 56, 
          "Haiti": 57, 
          "Hungary": 58, 
          "Iraq": [2364,740,26], 
          "Italy": 60, 
          "Jamaica": 61, 
          "Jordan": 62, 
          "Kazakhstan": 63, 
          "Kenya": 64, 
          "Korea (South)": 65, 
          "Kyrgyzstan": 66, 
          "Lao PDR": 67, 
          "Latvia": 68, 
          "Armenia": 69, 
          "Kuwait": 70, 
          "Djibouti": 71, 
          "Iceland": 72, 
          "Israel": [2252,743,14], 
          "Brunei Darussalam": 74, 
          "Ethiopia": 75, 
          "Lebanon": 76, 
          "Greece": 77, 
          "Cameroon": 78, 
          "Ghana": 79, 
          "Afghanistan": 80, 
          "Egypt": [2198,845,28], 
          "Indonesia": 82, 
          "Colombia": 83, 
          "Bangladesh": 84, 
          "Ireland": 85, 
          "Iran, Islamic Republic of": [2482,740,48], 
          "Guyana": 87, 
          "India": [2842,883,48], 
          "Germany": 89, 
          "Honduras": 90, 
          "Australia": [3535,1636,48], 
          "Brazil": [1088,1410,72], 
          "Madagascar": 93, 
          "Lithuania": 94, 
          "Luxembourg": 95, 
          "Monaco": 96, 
          "Liechtenstein": 97, 
          "Lesotho": 98, 
          "Liberia": 99, 
          "Libya": [2013,828,28], 
          "Macedonia, Republic of": 101, 
          "Malawi": 102, 
          "Malaysia": 103, 
          "Mali": 104, 
          "Malta": 105, 
          "Mauritania": 106, 
          "Mexico": 107, 
          "Moldova": 108, 
          "Mongolia": 109, 
          "Montenegro": 110, 
          "Morocco": 111, 
          "Mozambique": 112, 
          "Myanmar": 113, 
          "Nicaragua": 114, 
          "Niger": 115, 
          "Norway": 116, 
          "Panama": 117, 
          "Papua New Guinea": 118, 
          "Paraguay": 119, 
          "Philippines": 120, 
          "Poland": 121, 
          "Romania": 122, 
          "Russian Federation": [2300,324,84], 
          "Rwanda": 124, 
          "Saint Kitts and Nevis": 125, 
          "Maldives": 126, 
          "Namibia": [2036,1558,16], 
          "Peru": 128, 
          "Republic of Kosovo": 129, 
          "Nigeria": [1904,1103,18], 
          "Qatar": [2530,849,11], 
          "Pakistan": 132, 
          "Portugal": 133, 
          "Nepal": 134, 
          "Mauritius": 135, 
          "Palestinian Territory": [2248,729,18], 
          "Netherlands": 137, 
          "New Zealand": 138, 
          "Oman": [2558,960,12], 
          "Zimbabwe": 140, 
          "Uruguay": 141, 
          "San Marino": 142, 
          "Uganda": [2266,1220,9], 
          "Switzerland": 144, 
          "Saint Lucia": 145, 
          "Saint Vincent and Grenadines": 146, 
          "Senegal": 147, 
          "Serbia": 148, 
          "Seychelles": 149, 
          "Sierra Leone": 150, 
          "Slovakia": 151, 
          "Slovenia": 152, 
          "Somalia": [2411,1911,16], 
          "South Sudan": [2189,1112,18], 
          "Sri Lanka": 155, 
          "Sudan": [2186,978,18], 
          "Suriname": 157, 
          "Swaziland": 158, 
          "Sweden": 159, 
          "Syrian Arab Republic (Syria)": [2316,699,20], 
          "Taiwan, Republic of China": 161, 
          "Tajikistan": 162, 
          "Tanzania, United Republic of": [2277,1351,18], 
          "Thailand": 164, 
          "Timor-Leste": 165, 
          "Togo": [1832,1190,16], 
          "Trinidad and Tobago": 167, 
          "Tunisia": [1994,701,24], 
          "Turkey": [2259,642,28], 
          "Ukraine": [2203,495,28], 
          "Uzbekistan": 171, 
          "Venezuela (Bolivarian Republic)": [898,1112,18], 
          "Viet Nam": 173, 
        
          "Western Sahara": 174, 
        
          "Yemen": [2445,1005,20], 
          "Zambia": [2148,1481,20], 
          "Sao Tome and Principe": 177, 
          "Singapore": 178, 
        
        """
          "United Arab Emirates": [2602,868,11], 
          "South Africa": [2079,179,24], 
          "Spain": [1773,610,24], 
          "Saudi Arabia": [2386,884,20], 
          "Canada": [508,329,72], 
          "France": [1848,536,20], 
          "United Kingdom": [1735,334,14],
          "United States of America": [515,656,36]}
names_to_fix={
"Holy See (Vatican City State)":"Vatican",
"C\u00f4te d'Ivoire":"Ivory Coast",
"Iran, Islamic Republic of":"Iran",
"Syrian Arab Republic (Syria)":"Syria",
"Taiwan, Republic of China": "Taiwan",
"Tanzania, United Republic of":"Tanzania" ,
"Venezuela (Bolivarian Republic)": "Venezuela",
"Macedonia, Republic of":"Macedonia",
"Palestinian Territory":"Palestine"}
def fix_name(name):
    if name in names_to_fix.keys():
        return names_to_fix[name]
    else:
        return name
data = json.load(open('casper_scores.json',"r"))
img = Image.open('blank map.jpg')
img2 = img
for i in data.keys():
    if i not in Coords.keys():
        continue
    countryname =fix_name(i)
    order = str(data[i]) + "/186"
    draw = ImageDraw.Draw(img2)
    font = ImageFont.truetype("Roboto-Black.ttf", Coords[i][2])
    draw.text((Coords[i][0], Coords[i][1]),countryname,(0,0,0),font=font)
    draw.text((Coords[i][0], Coords[i][1] + Coords[i][2]),order,(0,0,0),font=font)
img2.save('portal/static/index.jpg')